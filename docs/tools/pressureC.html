<!DOCTYPE html><html><head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Gauge ↔ Absolute</title><link rel="stylesheet" href="../styles.css">
<script>
const n=v=>{if(v==null)return null;v=(''+v).replace(/,/g,'').trim();if(!v)return null;const x=parseFloat(v);return isNaN(x)?null:x;}
const PA_PER_PSIG=6894.757293168;
function baroFromElevationFt(ft){const m=ft*0.3048;const Pa=101325*Math.pow(1-2.25577e-5*m,5.25588);return Pa/PA_PER_PSIG;}
function baroResolve(){const mode=baro_mode.value;if(mode==='elev'){const ft=n(elev_ft.value);if(ft==null)return null;return baroFromElevationFt(ft);}
  const val=n(baro_val.value);const unit=baro_unit.value;if(val==null)return null;
  if(unit==='psia')return val;if(unit==='kPa')return (val*1000)/PA_PER_PSIG;if(unit==='inHg')return (val*3386.389)/PA_PER_PSIG;if(unit==='mbar')return (val*100)/PA_PER_PSIG;return null;}
function psigToPsia(){const psig=n(document.getElementById('psig').value),baro=baroResolve();const o=document.getElementById('abs_out');if(psig==null||baro==null){o.textContent='Fill psig and barometric.';return;}o.textContent=`${psig.toFixed(3)} psig → ${(psig+baro).toFixed(3)} psia (baro=${baro.toFixed(3)} psia)`;}
function psiaToPsig(){const psia=n(document.getElementById('psia').value),baro=baroResolve();const o=document.getElementById('gage_out');if(psia==null||baro==null){o.textContent='Fill psia and barometric.';return;}o.textContent=`${psia.toFixed(3)} psia → ${(psia-baro).toFixed(3)} psig (baro=${baro.toFixed(3)} psia)`;}
</script>
</head><body>
<div class="wrap" id="pressureC">
  <h1>Gauge ↔ Absolute</h1>

  <section class="tool">
    <h3>Barometric Source</h3>
    <div class="row">
      <div><label>Mode</label>
        <select id="baro_mode" onchange="elev_box.style.display=this.value==='elev'?'block':'none';baro_box.style.display=this.value==='baro'?'block':'none';">
          <option value="elev" selected>Use Elevation (ft)</option>
          <option value="baro">Enter Barometric</option>
        </select>
      </div>
    </div>
    <div id="elev_box"><label>Elevation (ft)</label><input id="elev_ft" inputmode="decimal"></div>
    <div id="baro_box" style="display:none">
      <div class="row">
        <div><label>Value</label><input id="baro_val" inputmode="decimal"></div>
        <div><label>Unit</label><select id="baro_unit"><option>psia</option><option>kPa</option><option>inHg</option><option>mbar</option></select></div>
      </div>
    </div>
    <div class="row" style="margin-top:8px">
      <button onclick="clearTool('pressureC')">Reset</button>
    </div>
  </section>

  <section class="tool">
    <div class="row">
      <div><label>psig</label><input id="psig" inputmode="decimal"><button onclick="psigToPsia()">psig → psia</button><pre id="abs_out" class="result"></pre></div>
      <div><label>psia</label><input id="psia" inputmode="decimal"><button onclick="psiaToPsig()">psia → psig</button><pre id="gage_out" class="result"></pre></div>
    </div>
    <div class="row" style="margin-top:8px">
      <button onclick="clearTool('pressureC')">Reset</button>
    </div>
  </section>
</div>
<script src="../script.js"></script>
</body></html>
